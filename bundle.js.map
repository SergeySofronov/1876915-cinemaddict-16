{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://cinemaddict/./src/const.js","webpack://cinemaddict/./src/filter.js","webpack://cinemaddict/./src/mock/data.js","webpack://cinemaddict/./src/mock/utils.js","webpack://cinemaddict/./src/presenter/film-presenter.js","webpack://cinemaddict/./src/presenter/films-desk-presenter.js","webpack://cinemaddict/./src/render.js","webpack://cinemaddict/./src/view/abstract-view.js","webpack://cinemaddict/./src/view/film-card-list-view.js","webpack://cinemaddict/./src/view/film-card-view.js","webpack://cinemaddict/./src/view/films-desk-view.js","webpack://cinemaddict/./src/view/films-quantity-footer-view.js","webpack://cinemaddict/./src/view/films-sheet-view.js","webpack://cinemaddict/./src/view/main-menu-view.js","webpack://cinemaddict/./src/view/popup-view.js","webpack://cinemaddict/./src/view/show-more-button-view.js","webpack://cinemaddict/./src/view/smart-view.js","webpack://cinemaddict/./src/view/sort-menu-view.js","webpack://cinemaddict/./src/view/user-profile-view.js","webpack://cinemaddict/./node_modules/dayjs/dayjs.min.js","webpack://cinemaddict/./node_modules/nanoid/index.dev.js","webpack://cinemaddict/./node_modules/nanoid/url-alphabet/index.js","webpack://cinemaddict/webpack/bootstrap","webpack://cinemaddict/webpack/runtime/compat get default export","webpack://cinemaddict/webpack/runtime/define property getters","webpack://cinemaddict/webpack/runtime/hasOwnProperty shorthand","webpack://cinemaddict/webpack/runtime/make namespace object","webpack://cinemaddict/./src/main.js"],"sourcesContent":["const SectionMessages = {\n  DEFAULT: 'All movies. Upcoming',\n  RATED: 'Top rated',\n  POPULAR: 'Most commented',\n  NO_MOVIES: 'There are no movies in our database',\n  NO_WATCHLIST: 'There are no movies to watch now',\n  NO_HISTORY: 'There are no watched movies now',\n  NO_FAVORITE: 'There are no favorite movies now'\n};\n\nconst SortType = {\n  DEFAULT: 'default',\n  COMMENT: 'most-commented',\n  RATE: 'top-rated',\n  DATE: 'top-dated'\n};\n\nconst DateFormatStyle = {\n  DEFAULT: 'DD MMMM YYYY',\n  COMMENT: 'YYYY/MM/DD HH:mm',\n  YEAR: 'YYYY'\n};\n\nconst PresenterMessages = {\n  DELETE_POPUP: 'popupDeleted',\n  DELETE_POPUP_UPDATE: 'popupDeletedUpdate',\n  UPDATE_POPUP: 'updatePopup',\n  UPDATE_FILM: 'updateFilm'\n};\n\nconst UpdateStates = {\n  WITHOUT_POPUP_UPDATE: false,\n  WITHOUT_FILM_UPDATE: false,\n  WITH_POPUP_UPDATE: true,\n  WITH_FILM_UPDATE: true,\n  PREVENT_DEFAULT: true,\n  EVENT_DEFAULT: false\n};\n\nconst KeyCode = {\n  ESC: 'Escape',\n};\n\nexport { SectionMessages, SortType, KeyCode, DateFormatStyle, PresenterMessages, UpdateStates };\n","import { DateFormatStyle } from './const';\nimport { changeDateFormat } from './mock/utils';\n\nconst filmStatistic = {\n  watchlist: 0,\n  watched: 0,\n  favorite: 0,\n  total: 0\n};\n\nconst userRank = {\n  'novice': [1, 10],\n  'fan': [11, 20],\n  'movie buff': [21, Infinity]\n};\n\nconst getUserRank = () => {\n  let rank = null;\n  const rankValues = Object.entries(userRank);\n  for (const [key, [min, max]] of rankValues) {\n    if ((filmStatistic.watched >= min) && (filmStatistic.watched <= max)) {\n      rank = key;\n      break;\n    }\n  }\n\n  return rank;\n};\n\nconst getFilmsStatistic = (filmData) => {\n  if (Array.isArray(filmData)) {\n    filmStatistic.total = filmData.length;\n\n    filmData.forEach((film) => {\n      filmStatistic.watchlist += film.userDetails.watchlist ? 1 : 0;\n      filmStatistic.watched += film.userDetails.watched ? 1 : 0;\n      filmStatistic.favorite += film.userDetails.favorite ? 1 : 0;\n    });\n  }\n\n  return filmStatistic;\n};\n\nconst getTopRatedFilmsData = (films) => {\n  if (Array.isArray(films)) {\n    return films.filter((film) => Boolean(film.filmInfo?.totalRating))\n      .sort((a, b) => (b.filmInfo.totalRating - a.filmInfo.totalRating));\n  }\n\n  return [];\n};\n\n\nconst getTopCommentedFilmsData = (films) => {\n  if (Array.isArray(films)) {\n    return films.filter((film) => Boolean(film.comments?.length))\n      .sort((a, b) => (b.comments.length - a.comments.length));\n  }\n\n  return [];\n};\n\nconst getFilmsDataByDate = (films) => {\n  if (Array.isArray(films)) {\n    return films.filter((film) => Boolean(film.filmInfo?.release?.date))\n      .sort((a, b) => {\n        const first = parseInt(changeDateFormat(a.filmInfo.release.date, DateFormatStyle.YEAR), 10);\n        const second = parseInt(changeDateFormat(b.filmInfo.release.date, DateFormatStyle.YEAR), 10);\n\n        if ((typeof (first) !== 'number') && (typeof (second) !== 'number')) {\n          return 0;\n        } else if ((typeof (first) !== 'number')) {\n          return -1;\n        } else {\n          return (second - first);\n        }\n      });\n  }\n\n  return [];\n\n};\n\nexport { getFilmsStatistic, getUserRank, getTopCommentedFilmsData, getTopRatedFilmsData, getFilmsDataByDate };\n\n","import { getRandomInteger, getNonRepeatUintArray, getRandomBoolean, getRandomPartFromArray, getRandomDate, getRandomFloatStrict } from './utils.js';\nimport { nanoid } from 'nanoid';\nimport { DateFormatStyle } from '../const.js';\n\nconst BASE_IMAGE_URL = './images/posters/';\nconst COMMENT_MAX_QUANTITY = 50;\nconst COMMENT_MIN_QUANTITY = 0;\nconst FILM_MAX_QUANTITY = 50;\nconst FILM_MIN_QUANTITY = 0;\nconst FILM_MAX_RATE = 10;\nconst FILM_MIN_RATE = 0;\nconst FILM_MIN_PEGI = 3;\nconst FILM_MAX_PEGI = 18;\nconst FILM_MIN_RUNTIME = 70;\nconst FILM_MAX_RUNTIME = 180;\nconst FILM_DESCRIPTION_MAX_QUANTITY = 5;\nconst FILM_DESCRIPTION_MIN_QUANTITY = 1;\nconst DATE_BASE_VALUE = '1950-01-01';\nconst DATE_GAP_MAX = 30;\nconst HOUR_VALUE = 60;\n\nconst filmUrl = new Map();\nfilmUrl.set('Made for Each Other', 'made-for-each-other.png')\n  .set('Popeye the Sailor Meets Sindbad the Sailor', 'popeye-meets-sinbad.png')\n  .set('Sagebrush Trai', 'sagebrush-trail.jpg')\n  .set('The Dance of Life', 'the-dance-of-life.jpg')\n  .set('The Man with the Golden Arm', 'the-man-with-the-golden-arm.jpg')\n  .set('The Great Flamarion', 'the-great-flamarion.jpg')\n  .set('Santa Claus Conquers the Martians', 'santa-claus-conquers-the-martians.jpg');\n\nconst filmDescriptions = [\n  'Lorem ipsum dolor sit amet, consectetur adipiscing elit.',\n  'Cras aliquet varius magna, non porta ligula feugiat eget.',\n  'Fusce tristique felis at fermentum pharetra.',\n  'Aliquam id orci ut lectus varius viverra.',\n  'Nullam nunc ex, convallis sed finibus eget, sollicitudin eget ante.',\n  'Phasellus eros mauris, condimentum sed nibh vitae, sodales efficitur ipsum.',\n  'Sed blandit, eros vel aliquam faucibus, purus ex euismod diam, eu luctus nunc ante ut dui.',\n  'Sed sed nisi sed augue convallis suscipit in sed felis. Aliquam erat volutpat.',\n  'Nunc fermentum tortor ac porta dapibus.',\n  'In rutrum ac purus sit amet tempus.'\n];\n\nconst filmCountries = ['USA', 'Italy', 'New Zealand', 'France', 'Great Britain', 'Canada'];\nconst filmWriters = ['Asghar Farhadi', 'Woody Allen', 'Charlie Kaufman', 'Paul Haggis', 'Rian Johnson'];\nconst filmDirectors = ['Christopher Nolan', 'Steven Spielberg', 'Quentin Tarantino', 'Martin Scorsese', 'Ridley Scott', 'Stanley Kubrick'];\nconst filmActors = ['Leonardo DiCaprio', 'Brad Pitt', 'Robert De Niro', 'Christian Bale', 'Tom Hanks', 'Gary Oldman', 'Edward Norton'];\nconst filmGenres = ['Drama', 'Comedy', 'Noir', 'Mystery', 'Fantasy'];\nconst commentEmotionTypes = ['smile', 'sleeping', 'puke', 'angry'];\nconst commentUserNames = ['Алиса Селезнёва ', 'Пашка Гераскин', 'Маша и Наташа Белые', 'Коля Наумов', 'Громозека', 'Весельчак У'];\nconst filmCommentExample = {\n  smile: ['А film that changed my life, a true masterpiece, post-credit scene was just amazing omg.', 'That\\'s awesome!', 'Great movie!'],\n  sleeping: ['Booooooooooring', 'Almost fell asleep. Really...', 'Good film but i\\'m tired.'],\n  puke: ['Very very old. Meh', 'It\\'s just disgusting'],\n  angry: ['Almost two hours? Seriously?', 'And it\\'s an Oscar nominee? It sucks', 'Burn it out', 'My eyes and ears are bleeding...']\n};\n\nconst filmQuantity = getRandomInteger(FILM_MIN_QUANTITY, FILM_MAX_QUANTITY);\nconst prepareCommentData = () => {\n  const commentEmotion = commentEmotionTypes[getRandomInteger(0, commentEmotionTypes.length - 1)];\n\n  return {\n    id: nanoid(),\n    author: commentUserNames[getRandomInteger(0, commentUserNames.length - 1)],\n    emotion: commentEmotion,\n    content: filmCommentExample[commentEmotion][getRandomInteger(0, filmCommentExample[commentEmotion].length - 1)],\n    date: getRandomDate(DATE_BASE_VALUE, DATE_GAP_MAX, DateFormatStyle.COMMENT),\n  };\n};\n\nconst getRandomCommentData = () => {\n  const commentQuantity = getRandomInteger(COMMENT_MIN_QUANTITY, COMMENT_MAX_QUANTITY);\n\n  return Array.from({ length: commentQuantity }, prepareCommentData);\n};\n\nconst getFilmTime = () => {\n  const time = getRandomInteger(FILM_MIN_RUNTIME, FILM_MAX_RUNTIME);\n  const hour = parseInt(time / HOUR_VALUE, 10);\n  const minute = time - hour * HOUR_VALUE;\n\n  return `${hour}h ${minute}m`;\n};\n\nconst prepareFilmData = () => {\n  if (filmQuantity) {\n    const filmName = [...filmUrl.keys()][getRandomInteger(0, filmUrl.size - 1)];\n    const randomIndexes = getNonRepeatUintArray(0, filmDescriptions.length - 1, filmDescriptions.length)\n      .slice(FILM_DESCRIPTION_MIN_QUANTITY, FILM_DESCRIPTION_MAX_QUANTITY);\n\n    return {\n      id: nanoid(),\n      comments: getRandomCommentData(),\n      filmInfo: {\n        title: filmName,\n        alternativeTitle: filmName,\n        totalRating: getRandomFloatStrict(FILM_MIN_RATE, FILM_MAX_RATE, 1),\n        poster: `${BASE_IMAGE_URL}${filmUrl.get(filmName)}`,\n        pegi: getRandomInteger(FILM_MIN_PEGI, FILM_MAX_PEGI),\n        director: filmDirectors[getRandomInteger(0, filmDirectors.length - 1)],\n        description: randomIndexes.map((value) => filmDescriptions[value]).join(' '),\n        actors: getRandomPartFromArray(filmActors).join(', '),\n        genre: getRandomPartFromArray(filmGenres),\n        writers: getRandomPartFromArray(filmWriters).join(', '),\n        release: {\n          date: getRandomDate(DATE_BASE_VALUE, DATE_GAP_MAX, DateFormatStyle.DEFAULT),\n          country: filmCountries[getRandomInteger(0, filmCountries.length - 1)],\n        },\n        runtime: getFilmTime()\n      },\n      userDetails: {\n        watchlist: getRandomBoolean(),\n        watched: getRandomBoolean(),\n        favorite: getRandomBoolean()\n      }\n    };\n  }\n\n  return null;\n};\n\nconst getRandomFilmData = () => Array.from({ length: filmQuantity }, prepareFilmData);\n\nconst getCommentEmotionTypes = () => commentEmotionTypes;\n\nexport { getRandomFilmData, getCommentEmotionTypes };\n","import dayjs from 'dayjs';\nconst DATE_FORMAT = 'YYYY/MM/DD HH:mm';\nconst DESCRIPTION_MAX_LENGTH = 140;\nconst BASE_DATE = '1990-01-01';\nconst DateFormat = {\n  DAY: 'day',\n  WEEK: 'week',\n  QUARTER: 'quarter',\n  MONTH: 'month',\n  YEAR: 'year',\n  HOUR: 'hour',\n  MINUTE: 'minute',\n  SECOND: 'second',\n  MSECOND: 'millisecond'\n};\n\n// Источник - https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore#_random\nconst getRandomInteger = (a = 0, b = 1) => {\n  const lower = Math.ceil(Math.min(a, b));\n  const upper = Math.floor(Math.max(a, b));\n\n  return Math.floor(lower + Math.random() * (upper - lower + 1));\n};\n\nconst getRandomFloat = (lowerBound, upperBound) => Math.random() * (upperBound - lowerBound) + lowerBound;\n\nconst getRandomFloatStrict = (lowerBound, upperBound, valueAfterComma) => Number((getRandomFloat(lowerBound, upperBound) + 1 / Math.pow(10, valueAfterComma + 1)).toFixed(valueAfterComma));\n\nconst getNonRepeatUintArray = (lowerBorder, upperBorder, arrayLength) => {\n  const arrayTotalNumbers = [];\n  const arrayRandomNumbers = [];\n  let lower = Math.ceil(Math.min(Math.abs(lowerBorder), Math.abs(upperBorder)));\n  const upper = Math.floor(Math.max(Math.abs(lowerBorder), Math.abs(upperBorder)));\n  let totalNumbers = Math.abs(upper - lower) + 1;\n  if (arrayLength && (totalNumbers >= arrayLength)) {\n    while (totalNumbers--) {\n      arrayTotalNumbers.push(totalNumbers + lower);\n    }\n    while (arrayTotalNumbers.length) {\n      lower = Math.round(Math.random() * (arrayTotalNumbers.length - 1));\n      arrayRandomNumbers.push(arrayTotalNumbers[lower]);\n      arrayTotalNumbers.splice(lower, 1);\n    }\n\n    return arrayRandomNumbers;\n  }\n\n  throw new Error('generateNonRepeatArray: wrong attributes');\n};\n\nconst getRandomPartFromArray = (inputArray) => {\n  if (Array.isArray(inputArray)) {\n    return inputArray.slice(0, getRandomInteger(1, inputArray.length));\n  }\n\n  return new Error('getRandomPartFromArray: inputArray is not an array');\n};\n\nconst getRandomBoolean = () => Boolean(getRandomInteger(0, 1));\n\nconst getRandomDate = (dateBase = BASE_DATE, dateGap = 0, dateFormat = DATE_FORMAT) => {\n  const date = dayjs(dateBase)\n    .add(getRandomInteger(-dateGap, dateGap), DateFormat.DAY)\n    .add(getRandomInteger(-dateGap, dateGap), DateFormat.MONTH)\n    .add(getRandomInteger(-dateGap, dateGap), DateFormat.YEAR)\n    .toDate();\n\n  return dayjs(date).format(dateFormat);\n};\n\nconst getShortFilmDescription = (filmDescription) => {\n  if (filmDescription?.length >= DESCRIPTION_MAX_LENGTH) {\n    return `${filmDescription.slice(0, DESCRIPTION_MAX_LENGTH - 1)}...`;\n  }\n\n  return filmDescription;\n};\n\nconst changeDateFormat = (date, format = DATE_FORMAT) => (date ? dayjs(date).format(format) : '');\n\nconst update = (filmsData, changedFilm) => {\n  if (Array.isArray(filmsData)) {\n\n    const index = filmsData.findIndex((film) => film.id === changedFilm?.id);\n\n    if (index === -1) {\n      return filmsData;\n    }\n\n    return [\n      ...filmsData.slice(0, index),\n      changedFilm,\n      ...filmsData.slice(index + 1),\n    ];\n  }\n};\n\nexport {\n  getRandomInteger,\n  getNonRepeatUintArray,\n  getRandomPartFromArray,\n  getRandomBoolean,\n  getRandomDate,\n  getRandomFloatStrict,\n  getShortFilmDescription,\n  changeDateFormat,\n  update\n};\n","import { render, replace, RenderPosition } from '../render.js';\nimport { PresenterMessages, UpdateStates } from '../const.js';\nimport SmartView from '../view/smart-view.js';\nimport AbstractView from '../view/abstract-view.js';\nimport FilmCardView from '../view/film-card-view';\nimport PopupView from '../view/popup-view';\n\nclass FilmPresenter {\n  #filmsList = null;\n  #filmData = null;\n  #filmCard = null;\n  #filmPopup = null;\n\n  #updateFilmData = null;\n  #updateActivePopup = null;\n  #getActivePopup = null;\n\n  constructor(filmsList, updateFilmData, updateActivePopup, getActivePopup) {\n    if (!(filmsList instanceof AbstractView)) {\n      throw new Error('Can\\'t handle init() while filmsList is not an Element');\n    }\n\n    for (let i = 1; i < arguments.length; i++) {\n      if (!(arguments[i] instanceof Function)) {\n        throw new Error(`Can\\\\'t handle init() while argument${i - 1} is not a Function`);\n      }\n    }\n\n    this.#filmsList = filmsList;\n    this.#updateFilmData = updateFilmData;\n    this.#updateActivePopup = updateActivePopup;\n    this.#getActivePopup = getActivePopup;\n  }\n\n  init = (filmData) => {\n\n    const prevFilmCard = this.#filmCard;\n\n    this.#filmData = filmData;\n    this.#filmCard = new FilmCardView(this.#filmData);\n    this.#updateFilmHandlers();\n\n    if (prevFilmCard) {\n      replace(prevFilmCard, this.#filmCard);\n    } else {\n      render(this.#filmsList, this.#filmCard, RenderPosition.BEFOREEND);\n    }\n\n    if (this.#isActivePopup()) {\n      const popupData = SmartView.parseData(this.#filmData);\n      this.#filmPopup.updateData(popupData, UpdateStates.WITH_POPUP_UPDATE, UpdateStates.WITHOUT_FILM_UPDATE);\n    }\n  }\n\n  #updateFilmPresenter = (message) => {\n    switch (message) {\n      case (PresenterMessages.DELETE_POPUP_UPDATE):\n        this.#updateActivePopup(null);\n        this.#filmPopup = null;\n        break;\n\n      case (PresenterMessages.DELETE_POPUP):\n        this.#filmPopup = null;\n        break;\n\n      case (PresenterMessages.UPDATE_FILM):\n        this.#updateFilmData(SmartView.restoreData(this.#filmPopup.data));\n        break;\n\n      default: break;\n    }\n  }\n\n  #updateFilmHandlers = () => {\n    this.#filmCard.setFilmClickHandler(this.#onFilmCardClick);\n    this.#filmCard.setWatchListClickHandler(this.#onWatchListClick);\n    this.#filmCard.setWatchedClickHandler(this.#onWatchedClick);\n    this.#filmCard.setFavoriteClickHandler(this.#onFavoriteClick);\n  }\n\n  #isActivePopup = () => ((this.#filmPopup) && (this.#getActivePopup()?.id === this.#filmPopup.id));\n\n  #onWatchListClick = () => {\n    this.#filmData.userDetails.watchlist = !this.#filmData.userDetails.watchlist;\n    this.#updateFilmData(this.#filmData);\n  }\n\n  #onWatchedClick = () => {\n    this.#filmData.userDetails.watched = !this.#filmData.userDetails.watched;\n    this.#updateFilmData(this.#filmData);\n  }\n\n  #onFavoriteClick = () => {\n    this.#filmData.userDetails.favorite = !this.#filmData.userDetails.favorite;\n    this.#updateFilmData(this.#filmData);\n  }\n\n  #onFilmCardClick = () => {\n    if (!this.#filmPopup) {\n      this.#filmPopup = new PopupView(this.#filmData, this.#updateFilmPresenter);\n    }\n\n    if (!this.#isActivePopup()) {\n      this.#updateActivePopup(this.#filmPopup);\n      this.#filmPopup.restoreHandlers(UpdateStates.WITHOUT_POPUP_UPDATE);\n    }\n  }\n}\n\nexport { FilmPresenter as default };\n","import { render, replace, RenderPosition } from '../render.js';\nimport { getTopRatedFilmsData, getTopCommentedFilmsData, getFilmsDataByDate } from '../filter.js';\nimport { SectionMessages, SortType, PresenterMessages } from '../const.js';\nimport { update } from '../mock/utils.js';\n\nimport SortMenuView from '../view/sort-menu-view.js';\nimport FilmsDeskView from '../view/films-desk-view.js';\nimport FilmsSheetView from '../view/films-sheet-view.js';\nimport FilmCardListView from '../view/film-card-list-view.js';\nimport FilmPresenter from './film-presenter.js';\nimport ShowMoreButtonView from '../view/show-more-button-view.js';\n\nconst FILM_SHOW_PER_STEP = 5;\nconst FILM_EXTRA_QUANTITY = 2;\n\nclass FilmDeskPresenter {\n  #filmDeskRenderContainer = null;\n  #filmSortMenu = new SortMenuView();\n  #filmsDesk = new FilmsDeskView();\n  #filmEmptySheet = new FilmsSheetView(SectionMessages.NO_MOVIES);\n  #filmsMainSheet = new FilmsSheetView(SectionMessages.DEFAULT, false, true);\n  #filmsMainCardList = new FilmCardListView();\n  #filmsRatedSheet = new FilmsSheetView(SectionMessages.RATED, true);\n  #filmsRatedCardList = new FilmCardListView();\n  #filmsPopularSheet = new FilmsSheetView(SectionMessages.POPULAR, true);\n  #filmsPopularCardList = new FilmCardListView();\n  #showMoreButton = new ShowMoreButtonView();\n\n  #filmsPresenters = new Map();\n  #activePopup = null;\n  #filmsData = [];\n  #filmsDataDefault = [];\n  #activeSortType = SortType.DEFAULT;\n\n  #shownFilmQuantity = null;\n  #totalFilmsQuantity = null;\n  #extraFilmsQuantity = null;\n  #restFilmQuantity = null;\n\n  constructor(renderContainer) {\n    this.#filmDeskRenderContainer = renderContainer;\n  }\n\n  init = (filmsData) => {\n    this.#filmsData = [...filmsData];\n    this.#filmsDataDefault = [...this.#filmsData];\n    this.#totalFilmsQuantity = this.#filmsData.length;\n    this.#extraFilmsQuantity = (this.#filmsData.length > FILM_EXTRA_QUANTITY) ? FILM_EXTRA_QUANTITY : 0;\n    this.#filmSortMenu.setSortClickHandler(this.#onSortMenuClick);\n\n    render(this.#filmDeskRenderContainer, this.#filmSortMenu, RenderPosition.BEFOREEND);\n    render(this.#filmDeskRenderContainer, this.#filmsDesk, RenderPosition.BEFOREEND);\n    this.#renderDeskSheets();\n  }\n\n  #getActivePopup = () => this.#activePopup;\n\n  #updateActivePopup = (popup) => {\n    if (popup) {\n      if (this.#activePopup) {\n        replace(this.#activePopup, popup);\n        if (this.#activePopup.id !== popup.id) {\n          this.#activePopup.destroyPopup(PresenterMessages.DELETE_POPUP);\n        }\n      } else {\n        document.body.classList.add('hide-overflow');\n        render(document.body, popup, RenderPosition.BEFOREEND);\n      }\n    }\n\n    this.#activePopup = popup;\n  }\n\n  #updateFilmData = (film) => {\n    this.#filmsData = update(this.#filmsData, film);\n    this.#filmsDataDefault = update(this.#filmsDataDefault, film);\n    for (const [presenter, filmId] of this.#filmsPresenters.entries()) {\n      if (filmId === film.id) {\n        presenter.init(film);\n      }\n    }\n  }\n\n  #getFilmsToShowQuantity = () => {\n    if (this.#totalFilmsQuantity > this.#shownFilmQuantity) {\n      this.#restFilmQuantity = Math.min((this.#totalFilmsQuantity - this.#shownFilmQuantity), FILM_SHOW_PER_STEP);\n    } else {\n      this.#restFilmQuantity = 0;\n    }\n\n    return this.#restFilmQuantity;\n  }\n\n  #renderFilmCards = (from, toward, filmsList) => {\n    this.#filmsData.slice(from, toward).forEach((film) => {\n      if (film.id) {\n        const filmPresenter = new FilmPresenter(filmsList, this.#updateFilmData, this.#updateActivePopup, this.#getActivePopup);\n        filmPresenter.init(film);\n        this.#filmsPresenters.set(filmPresenter, film.id);\n      }\n    });\n  }\n\n  #renderSheet = (sheet, list, sortType, quantity) => {\n    this.#sortFilmsData(sortType);\n    render(this.#filmsDesk, sheet, RenderPosition.AFTERBEGIN);\n    render(sheet, list, RenderPosition.BEFOREEND);\n    this.#renderFilmCards(0, quantity, list);\n  }\n\n  #renderDeskSheets = (sortType) => {\n    if (this.#totalFilmsQuantity) {\n\n      if (this.#extraFilmsQuantity) {\n        this.#renderSheet(this.#filmsPopularSheet, this.#filmsPopularCardList, SortType.COMMENT, this.#extraFilmsQuantity);\n        this.#renderSheet(this.#filmsRatedSheet, this.#filmsRatedCardList, SortType.RATE, this.#extraFilmsQuantity);\n      }\n\n      this.#renderSheet(this.#filmsMainSheet, this.#filmsMainCardList, sortType, this.#getFilmsToShowQuantity());\n      this.#shownFilmQuantity += Math.min(this.#totalFilmsQuantity, FILM_SHOW_PER_STEP);\n\n      if (this.#getFilmsToShowQuantity()) {\n        this.#showMoreButton.setButtonClickHandler(this.#onShowMoreButtonClick);\n        render(this.#filmsMainCardList, this.#showMoreButton, RenderPosition.AFTEREND);\n      }\n\n      return;\n    }\n\n    render(this.#filmsDesk, this.#filmEmptySheet, RenderPosition.BEFOREEND);\n  }\n\n  #resetDesk = () => {\n    this.#shownFilmQuantity = 0;\n    this.#filmsMainCardList.destroyElement();\n    this.#filmsRatedCardList.destroyElement();\n    this.#filmsPopularCardList.destroyElement();\n    this.#showMoreButton.destroyElement();\n  }\n\n  #sortFilmsData = (sortType) => {\n    switch (sortType) {\n      case (SortType.RATE):\n        this.#filmsData = getTopRatedFilmsData(this.#filmsDataDefault);\n        break;\n\n      case (SortType.DATE):\n        this.#filmsData = getFilmsDataByDate(this.#filmsDataDefault);\n        break;\n\n      case (SortType.COMMENT):\n        this.#filmsData = getTopCommentedFilmsData(this.#filmsDataDefault);\n        break;\n\n      default: case (SortType.DEFAULT):\n        this.#filmsData = [...this.#filmsDataDefault];\n        break;\n    }\n\n    this.#activeSortType = sortType;\n  }\n\n  #onSortMenuClick = (evt) => {\n    if (evt.target.tagName === 'A') {\n      const type = evt.target.dataset.sortType;\n      if (this.#activeSortType !== type) {\n        this.#resetDesk();\n        this.#renderDeskSheets(type);\n      }\n    }\n  }\n\n  #onShowMoreButtonClick = () => {\n    const rest = this.#getFilmsToShowQuantity();\n    if (rest) {\n      this.#renderFilmCards(this.#shownFilmQuantity, this.#shownFilmQuantity + rest, this.#filmsMainCardList);\n      this.#shownFilmQuantity += rest;\n    }\n\n    if (!this.#getFilmsToShowQuantity()) {\n      this.#showMoreButton.destroyElement();\n    }\n  };\n}\n\nexport { FilmDeskPresenter as default };\n","import AbstractView from './view/abstract-view';\n\nconst RenderPosition = {\n  BEFOREBEGIN: 'beforebegin',\n  AFTERBEGIN: 'afterbegin',\n  BEFOREEND: 'beforeend',\n  AFTEREND: 'afterend',\n};\n\nconst render = (container, component, place) => {\n\n  const parent = container instanceof AbstractView ? container.element : container;\n  const child = component instanceof AbstractView ? component.element : component;\n\n  if ((parent instanceof Element) && (child instanceof Element)) {\n    switch (place) {\n      case RenderPosition.BEFOREBEGIN:\n        parent.before(child);\n        break;\n      case RenderPosition.AFTERBEGIN:\n        parent.prepend(child);\n        break;\n      case RenderPosition.BEFOREEND:\n        parent.append(child);\n        break;\n      case RenderPosition.AFTEREND:\n        parent.after(child);\n        break;\n\n      default: break;\n    }\n  } else{\n    throw new Error('Container or component aren\\'t instance of Element');\n  }\n};\n\nconst replace = (oldElement, newElement) => {\n  if (!(oldElement && newElement)) {\n    throw new Error('Can\\'t replace non-existing elements');\n  }\n\n  const oldInstance = oldElement instanceof AbstractView ? oldElement.element : oldElement;\n  const newInstance = newElement instanceof AbstractView ? newElement.element : newElement;\n\n  if (!((oldInstance instanceof Element) && (newInstance instanceof Element))) {\n    throw new Error('Can\\'t replace non-Element instance');\n  }\n\n  oldInstance.replaceWith(newInstance);\n};\n\nexport { render, replace, RenderPosition };\n","import { UpdateStates } from '../const.js';\n\nclass AbstractView {\n  #element = null;\n  #eventInfo = new Map();\n  constructor() {\n    if (new.target === AbstractView) {\n      throw new Error('Can\\'t instantiate AbstractView, class instance only');\n    }\n  }\n\n  get element() {\n    if (!this.#element) {\n      this.#element = this.createElement(this.template);\n    }\n\n    return this.#element;\n  }\n\n  get template() {\n    throw new Error('Abstract method not implemented: get template()');\n  }\n\n  #getElementSelector = (selector) => {\n    const elementSelector = (selector instanceof Element) ? selector : this.element?.querySelector(selector);\n    if (!(elementSelector instanceof Element)) {\n      throw new Error('Unable to create/remove event listener for non DOM Element');\n    }\n    return elementSelector;\n  }\n\n  createElement = (template) => {\n    if (typeof (template) === 'string') {\n      const element = document.createElement('div');\n      element.innerHTML = template;\n\n      if (element.firstElementChild === element.lastElementChild) {\n\n        return element.firstElementChild;\n      }\n\n      throw new Error('Can\\'t create component from several sibling elements');\n    }\n\n    return null;\n  };\n\n  removeElement = () => {\n    this.removeAllEventListeners();\n    this.#element = null;\n  }\n\n  destroyElement = () => {\n    this.#element.remove();\n    this.removeElement();\n  }\n\n  createEventListener = (selector, eventType, callback, isPreventDefault = UpdateStates.PREVENT_DEFAULT) => {\n\n    const elementSelector = this.#getElementSelector(selector);\n\n    if (typeof (callback) !== 'function') {\n      throw new Error('Argument \"callback\" is not a function');\n    }\n\n    const eventHandler = (evt) => {\n      if (isPreventDefault) {\n        evt.preventDefault();\n      }\n      callback(evt);\n    };\n\n    const isHasSimilar = [...this.#eventInfo.entries()]\n      .some(([key, [, handler]]) => ((key === elementSelector) || (handler === eventHandler)));\n\n    if (!isHasSimilar) {\n      this.#eventInfo.set(elementSelector, [eventType, eventHandler]);\n      elementSelector.addEventListener(eventType, eventHandler);\n    }\n  }\n\n  removeAllEventListeners() {\n    for (const [elementSelector, [eventType, eventHandler]] of this.#eventInfo.entries()) {\n      elementSelector.removeEventListener(eventType, eventHandler);\n      this.#eventInfo.delete(elementSelector);\n    }\n  }\n}\n\nexport { AbstractView as default };\n","import AbstractView from './abstract-view';\n\nconst getFilmCardsContainerTemplate = () => (\n  `<div class=\"films-list__container\">\n        <!-- Карточки фильмов -->\n  </div>`\n);\n\nclass FilmCardListView extends AbstractView {\n  get template() {\n    return getFilmCardsContainerTemplate();\n  }\n}\n\nexport { FilmCardListView as default };\n","import { getShortFilmDescription, changeDateFormat } from '../mock/utils';\nimport { DateFormatStyle } from '../const';\nimport AbstractView from './abstract-view';\n\nconst ACTIVE_CLASS = 'film-card__controls-item--active';\n\nconst getFilmCardTemplate = (filmData) => {\n  if (filmData) {\n    const {\n      title = '',\n      description = '',\n      totalRating = 0,\n      poster = '',\n      genre = [],\n      runtime = '',\n      release = '',\n    } = filmData.filmInfo || {};\n\n    const year = changeDateFormat(release?.date, DateFormatStyle.YEAR);\n    const comments = filmData.comments || [];\n\n    const {\n      watchlist = false,\n      watched = false,\n      favorite = false\n    } = filmData.userDetails || {};\n\n    return (\n      `<article class=\"film-card\">\n        <a class=\"film-card__link\">\n          <h3 class=\"film-card__title\">${title}</h3>\n          <p class=\"film-card__rating\">${totalRating}</p>\n          <p class=\"film-card__info\">\n            <span class=\"film-card__year\">${year}</span>\n            <span class=\"film-card__duration\">${runtime}</span>\n            <span class=\"film-card__genre\">${genre.length ? genre[genre.length - 1] : ''}</span>\n          </p>\n          <img src=\"${poster}\" alt=\"Изображение обложки фильма\" class=\"film-card__poster\">\n          <p class=\"film-card__description\">${getShortFilmDescription(description)}</p>\n          <span class=\"film-card__comments\">${comments.length} comments</span>\n        </a>\n        <div class=\"film-card__controls\">\n          <button class=\"film-card__controls-item film-card__controls-item--add-to-watchlist ${watchlist ? ACTIVE_CLASS : ''}\" type=\"button\">Add to watchlist</button>\n          <button class=\"film-card__controls-item film-card__controls-item--mark-as-watched ${watched ? ACTIVE_CLASS : ''}\" type=\"button\">Mark as watched</button>\n          <button class=\"film-card__controls-item film-card__controls-item--favorite ${favorite ? ACTIVE_CLASS : ''}\" type=\"button\">Mark as favorite</button>\n        </div>\n    </article>`\n    );\n  }\n\n  return '';\n};\n\nclass FilmCardView extends AbstractView {\n  #id = null;\n  #filmData = {};\n  constructor(filmData) {\n    super();\n    this.#filmData = filmData;\n  }\n\n  get id() {\n    return this.#id;\n  }\n\n  get template() {\n    return getFilmCardTemplate(this.#filmData);\n  }\n\n  setFilmClickHandler = (callback) => {\n    this.createEventListener('.film-card__link', 'click', callback);\n  }\n\n  setWatchListClickHandler = (callback) => {\n    this.createEventListener('.film-card__controls-item--add-to-watchlist', 'click', callback);\n  }\n\n  setWatchedClickHandler = (callback) => {\n    this.createEventListener('.film-card__controls-item--mark-as-watched', 'click', callback);\n  }\n\n  setFavoriteClickHandler = (callback) => {\n    this.createEventListener('.film-card__controls-item--favorite', 'click', callback);\n  }\n}\n\nexport { FilmCardView as default };\n","import AbstractView from './abstract-view';\n\nconst getFilmSectionTemplate = () => (\n  `<section class=\"films\">\n    <!-- Main film section + Top rated + Top commented -->\n  </section>`\n);\n\nclass FilmsDeskView extends AbstractView {\n  get template() {\n    return getFilmSectionTemplate();\n  }\n}\n\nexport { FilmsDeskView as default };\n","import AbstractView from './abstract-view';\n\nconst getFilmFooterTemplate = (filmFilter) => {\n  if (filmFilter?.total) {\n    return `<p>${filmFilter.total} movies inside</p>`;\n  }\n\n  return '';\n};\n\nclass FilmFooterView extends AbstractView {\n  #filmFilter = {};\n  constructor(filmFilter) {\n    super();\n    this.#filmFilter = filmFilter;\n  }\n\n  get template() {\n    return getFilmFooterTemplate(this.#filmFilter);\n  }\n}\n\nexport { FilmFooterView as default };\n","import AbstractView from './abstract-view';\n\nconst getFilmListSectionTemplate = (titleText, isExtraSection = false, isHidden = false) => (\n  `<section class=\"films-list ${isExtraSection ? 'films-list--extra' : ''}\">\n    <h2 class=\"films-list__title ${isHidden ? 'visually-hidden' : ''}\">${titleText}</h2>\n  </section>`\n);\n\nclass FilmsSheetView extends AbstractView {\n  #titleText = '';\n  #isExtraSection = false;\n  #isHidden = false;\n  constructor(titleText, isExtraSection, isHidden) {\n    super();\n    this.#titleText = titleText;\n    this.#isExtraSection = isExtraSection;\n    this.#isHidden = isHidden;\n  }\n\n  get template() {\n    return getFilmListSectionTemplate(this.#titleText, this.#isExtraSection, this.#isHidden);\n  }\n}\n\nexport { FilmsSheetView as default };\n","import AbstractView from './abstract-view';\n\nconst getMainMenuTemplate = (filmFilter = {}) => {\n  const {\n    watchlist = 0,\n    watched = 0,\n    favorite = 0,\n  } = filmFilter;\n\n  return (\n    `<nav class=\"main-navigation\">\n      <div class=\"main-navigation__items\">\n        <a href=\"#all\" class=\"main-navigation__item main-navigation__item--active\">All movies</a>\n        <a href=\"#watchlist\" class=\"main-navigation__item\">Watchlist <span class=\"main-navigation__item-count\">${watchlist}</span></a>\n        <a href=\"#history\" class=\"main-navigation__item\">History <span class=\"main-navigation__item-count\">${watched}</span></a>\n        <a href=\"#favorites\" class=\"main-navigation__item\">Favorites <span class=\"main-navigation__item-count\">${favorite}</span></a>\n      </div>\n      <a href=\"#stats\" class=\"main-navigation__additional\">Stats</a>\n    </nav>`\n  );\n};\n\nclass MainMenuView extends AbstractView {\n  #filmFilter = {};\n  constructor(filmFilter) {\n    super();\n    this.#filmFilter = filmFilter;\n  }\n\n  get template() {\n    return getMainMenuTemplate(this.#filmFilter);\n  }\n}\n\nexport { MainMenuView as default };\n","import SmartView from './smart-view';\nimport { KeyCode, PresenterMessages, UpdateStates } from '../const.js';\nimport { getCommentEmotionTypes } from '../mock/data';\n\nconst ACTIVE_CLASS = 'film-details__control-button--active';\n\nconst TableTerms = {\n  DIRECTOR: 'Director',\n  WRITERS: 'Writers',\n  ACTORS: 'Actors',\n  DATE: 'Release Date',\n  TIME: 'Runtime',\n  COUNTRY: 'Country',\n  GENRES: 'Genres'\n};\n\nconst emotionTypes = (Array.isArray(getCommentEmotionTypes()) && getCommentEmotionTypes()) || [];\n\nconst getCommentEmotionTemplate = (emotion, isChecked = false) => {\n  if (emotionTypes.includes(emotion)) {\n    return (\n      `<input class=\"film-details__emoji-item visually-hidden\" name=\"comment-emoji\" type=\"radio\" id=\"emoji-${emotion}\" value=\"${emotion}\" ${isChecked ? 'checked' : ''}>\n        <label class=\"film-details__emoji-label\" for=\"emoji-${emotion}\">\n          <img src=\"./images/emoji/${emotion}.png\" width=\"30\" height=\"30\" alt=\"emoji\">\n        </label>`\n    );\n  }\n\n  return '';\n};\n\n\nconst getPopupNewCommentTemplate = (comment, userEmoji) => (\n  `<div class=\"film-details__new-comment\">\n    <div class=\"film-details__add-emoji-label\">\n      <!--User Emoji-->\n      ${userEmoji ? `<img src=\"images/emoji/${userEmoji}.png\" width=\"55\" height=\"55\" alt=\"emoji-${userEmoji}\">` : ''}\n    </div>\n\n    <label class=\"film-details__comment-label\">\n      <textarea class=\"film-details__comment-input\" placeholder=\"Select reaction below and write comment here\" name=\"comment\">${comment ? comment : ''}</textarea>\n    </label>\n\n    <div class=\"film-details__emoji-list\">\n        ${emotionTypes.map((emotion) => getCommentEmotionTemplate(emotion, (emotion === userEmoji))).join('')}\n    </div>\n  </div>`);\n\nconst getLoadedCommentTemplate = (comment = {}) => {\n  const {\n    id = '',\n    author = '',\n    emotion = '',\n    content = '',\n    date = '',\n  } = comment;\n\n  return (\n    `<li class=\"film-details__comment\">\n      <span class=\"film-details__comment-emoji\">\n        <img src=\"./images/emoji/${emotion}.png\" width=\"55\" height=\"55\" alt=\"emoji-smile\">\n      </span>\n      <div>\n        <p class=\"film-details__comment-text\">${content}</p>\n        <p class=\"film-details__comment-info\">\n          <span class=\"film-details__comment-author\">${author}</span>\n          <span class=\"film-details__comment-day\">${date}</span>\n          <button class=\"film-details__comment-delete\" data-button-id = ${id}>Delete</button>\n        </p>\n      </div>\n    </li>`\n  );\n};\n\nconst getPopupCommentSectionTemplate = (data) => {\n  if (data) {\n    return (\n      `<div class=\"film-details__bottom-container\">\n        <section class=\"film-details__comments-wrap\">\n          <h3 class=\"film-details__comments-title\">Comments <span class=\"film-details__comments-count\">${data.changedComments ? data.changedComments.length : 0}</span></h3>\n\n          <ul class=\"film-details__comments-list\">\n            <!-- Отрисовка всех комментариев к фильму -->\n            ${data.changedComments.map((comment) => getLoadedCommentTemplate(comment)).join('')}\n          </ul>\n\n          ${getPopupNewCommentTemplate(data.userComment, data.userEmoji)}\n        </section>\n      </div>`\n    );\n  }\n\n  return '';\n};\n\nconst getTableRow = (term, ceilData) => (\n  `<tr class=\"film-details__row\">\n  <td class=\"film-details__term\">${term || ''}</td>\n  <td class=\"film-details__cell\">${ceilData || ''}</td>\n</tr>`\n);\n\nconst getCardGenres = (genres) => {\n  const genreTemplates = [];\n  if (Array.isArray(genres)) {\n    genres.forEach((genre) => {\n      genreTemplates.push(`<span class=\"film-details__genre\">${genre}</span>`);\n    });\n  }\n\n  return genreTemplates.join(' ');\n};\n\nconst getPopupTemplate = (data) => {\n  if (data) {\n    const {\n      title = '',\n      alternativeTitle = '',\n      description = '',\n      totalRating = 0,\n      poster = '',\n      genre = [],\n      runtime = '',\n      release = {},\n      pegi = '',\n      director = '',\n      writers = [],\n      actors = [],\n    } = data.filmInfo || {};\n\n    const {\n      watchlist = false,\n      watched = false,\n      favorite = false\n    } = data;\n\n    return (\n      `<section class=\"film-details\">\n        <form class=\"film-details__inner\" action=\"\" method=\"get\">\n          <div class=\"film-details__top-container\">\n            <div class=\"film-details__close\">\n              <button class=\"film-details__close-btn\" type=\"button\">close</button>\n            </div>\n            <div class=\"film-details__info-wrap\">\n              <div class=\"film-details__poster\">\n                <img class=\"film-details__poster-img\" src=\"${poster}\" alt=\"Изображение постера фильма\">\n                <p class=\"film-details__age\">+${pegi}</p>\n              </div>\n\n              <div class=\"film-details__info\">\n                <div class=\"film-details__info-head\">\n                  <div class=\"film-details__title-wrap\">\n                    <h3 class=\"film-details__title\">${title}</h3>\n                    <p class=\"film-details__title-original\">Original: ${alternativeTitle}</p>\n                  </div>\n\n                  <div class=\"film-details__rating\">\n                    <p class=\"film-details__total-rating\">${totalRating}</p>\n                  </div>\n                </div>\n\n                <table class=\"film-details__table\">\n                ${getTableRow(TableTerms.DIRECTOR, director)}\n                ${getTableRow(TableTerms.WRITERS, writers)}\n                ${getTableRow(TableTerms.ACTORS, actors)}\n                ${getTableRow(TableTerms.DATE, release.date || '')}\n                ${getTableRow(TableTerms.TIME, runtime)}\n                ${getTableRow(TableTerms.COUNTRY, release.country || '')}\n                ${getTableRow(TableTerms.GENRES, getCardGenres(genre))}\n                </table>\n\n                <p class=\"film-details__film-description\">\n                  ${description}\n              </div>\n            </div>\n\n            <section class=\"film-details__controls\">\n              <button type=\"button\" class=\"film-details__control-button film-details__control-button--watchlist ${watchlist ? ACTIVE_CLASS : ''}\" id=\"watchlist\" name=\"watchlist\">Add to watchlist</button>\n              <button type=\"button\" class=\"film-details__control-button film-details__control-button--watched ${watched ? ACTIVE_CLASS : ''}\" id=\"watched\" name=\"watched\">Already watched</button>\n              <button type=\"button\" class=\"film-details__control-button film-details__control-button--favorite ${favorite ? ACTIVE_CLASS : ''}\" id=\"favorite\" name=\"favorite\">Add to favorites</button>\n            </section>\n          </div>\n\n          <!-- Секция комментариев -->\n          ${getPopupCommentSectionTemplate(data)}\n\n\n        </form>\n      </section>`\n    );\n  }\n\n  return '';\n};\n\nclass PopupView extends SmartView {\n  #id = null;\n  #updateFilmPresenter = null;\n  constructor(filmData, updateFilmPresenter) {\n    super();\n\n    if (!(updateFilmPresenter instanceof Function)) {\n      throw new Error('Can\\'t create PopupView instance updateFilmPresenter is not a Function');\n    }\n\n    this.#id = filmData?.id || null;\n    this.data = SmartView.parseData(filmData);\n    this.#updateFilmPresenter = updateFilmPresenter;\n  }\n\n  get id() {\n    return this.#id;\n  }\n\n  get template() {\n    return getPopupTemplate(this.data);\n  }\n\n  destroyPopup = (message) => {\n    this.destroyElement();\n    this.#updateFilmPresenter(message);\n  }\n\n  restoreHandlers = (isFilmUpdating = UpdateStates.WITH_FILM_UPDATE) => {\n    this.createEventListener('.film-details__close-btn', 'click', this.#onPopupButtonClose);\n    this.createEventListener('.film-details__control-button--watchlist', 'click', this.#onWatchListButtonClick);\n    this.createEventListener('.film-details__control-button--watched', 'click', this.#onWatchedButtonClick);\n    this.createEventListener('.film-details__control-button--favorite', 'click', this.#onFavoriteButtonClick);\n    this.createEventListener('.film-details__comment-input', 'change', this.#onUserCommentChange);\n    this.createEventListener('.film-details__emoji-list', 'change', this.#onUserEmojiChange);\n    this.createEventListener(document.body, 'keydown', this.#onEscKeyDown, UpdateStates.EVENT_DEFAULT);\n    this.element.querySelectorAll('.film-details__bottom-container li button')\n      .forEach((commentSelector) => this.createEventListener(commentSelector, 'click', this.#onCommentDelete));\n\n    if (isFilmUpdating) {\n      this.#updateFilmPresenter(PresenterMessages.UPDATE_FILM);\n    }\n  }\n\n  #onUserEmojiChange = (evt) => {\n    this.updateData({ userEmoji: evt.target.value });\n  }\n\n  #onUserCommentChange = (evt) => {\n    this.updateData({ userComment: evt.target.value }, UpdateStates.WITHOUT_POPUP_UPDATE);\n  }\n\n  #onCommentDelete = (evt) => {\n    const buttonId = evt.target.dataset.buttonId;\n    const index = this.data.changedComments.findIndex((comment) => comment.id === buttonId);\n    this.data.changedComments.splice(index, 1);\n    this.updateData(this.data.changedComments);\n  }\n\n  #onWatchListButtonClick = () => {\n    this.updateData({ watchlist: !this.data.watchlist });\n  }\n\n  #onWatchedButtonClick = () => {\n    this.updateData({ watched: !this.data.watched });\n  }\n\n  #onFavoriteButtonClick = () => {\n    this.updateData({ favorite: !this.data.favorite });\n  }\n\n  #onPopupButtonClose = () => {\n    this.destroyPopup(PresenterMessages.DELETE_POPUP_UPDATE);\n    document.body.classList.remove('hide-overflow');\n  };\n\n  #onEscKeyDown = (evt) => {\n    if (evt.key === KeyCode.ESC) {\n      this.#onPopupButtonClose();\n    }\n  };\n}\n\nexport { PopupView as default };\n\n\n","import AbstractView from './abstract-view';\n\nconst getShowMoreButtonTemplate = () => (\n  '<button class=\"films-list__show-more\">Show more</button>'\n);\n\nclass ShowMoreButtonView extends AbstractView {\n\n  get template() {\n    return getShowMoreButtonTemplate();\n  }\n\n  setButtonClickHandler = (callback) => {\n    this.createEventListener(this.element, 'click', callback);\n  }\n}\n\nexport { ShowMoreButtonView as default };\n","import AbstractView from './abstract-view.js';\nimport { UpdateStates } from '../const.js';\n\nclass SmartView extends AbstractView {\n  #data = {};\n\n  get data() {\n    return this.#data;\n  }\n\n  set data(data) {\n    this.#data = data;\n  }\n\n  updateData = (update, isPopupUpdating = UpdateStates.WITH_POPUP_UPDATE, isFilmUpdating = UpdateStates.WITH_FILM_UPDATE) => {\n    if (!update) {\n      return;\n    }\n\n    this.#data = { ...this.#data, ...update };\n\n    if (isPopupUpdating) {\n      this.updateElement(isFilmUpdating);\n    }\n\n  }\n\n  updateElement = (isFilmUpdating) => {\n    const prevElement = this.element;\n    const scrollPosition = (prevElement.scrollTop || 0);\n    const parent = prevElement.parentElement;\n    this.removeElement();\n\n    const newElement = this.element;\n    parent.replaceChild(newElement, prevElement);\n    newElement.scrollTop = scrollPosition;\n\n    this.restoreHandlers(isFilmUpdating);\n  }\n\n  restoreHandlers = () => {\n    throw new Error('Abstract method not implemented: restoreHandlers');\n  }\n\n  static parseData = (filmData) => ({\n    ...filmData, changedComments: [...filmData.comments],\n    watchlist: filmData.userDetails.watchlist,\n    watched: filmData.userDetails.watched,\n    favorite: filmData.userDetails.favorite\n  });\n\n  static restoreData = (data) => {\n    const filmData = { ...data };\n    filmData.comments = data.changedComments;\n    filmData.userDetails.watchlist = data.watchlist;\n    filmData.userDetails.watched = data.watched;\n    filmData.userDetails.favorite = data.favorite;\n    delete filmData.watchlist;\n    delete filmData.watched;\n    delete filmData.favorite;\n    delete filmData.changedComments;\n    delete filmData.userComment;\n    delete filmData.userEmoji;\n\n    return filmData;\n  }\n}\n\nexport { SmartView as default };\n","import AbstractView from './abstract-view';\nimport { SortType } from '../const.js';\n\nconst getFilmSortMenuTemplate = () => (\n  `<ul class=\"sort\">\n    <li><a href=\"#\" class=\"sort__button sort__button--active\" data-sort-type = ${SortType.DEFAULT}>Sort by default</a></li>\n    <li><a href=\"#\" class=\"sort__button\" data-sort-type = ${SortType.DATE}>Sort by date</a></li>\n    <li><a href=\"#\" class=\"sort__button\" data-sort-type = ${SortType.RATE}>Sort by rating</a></li>\n  </ul>`\n);\n\nclass SortMenuView extends AbstractView {\n  get template() {\n    return getFilmSortMenuTemplate();\n  }\n\n  #setActiveAnchor = (evt) => {\n    this.element.querySelectorAll('a').forEach((anchor) => {\n      if (anchor === evt.target) {\n        anchor.classList.add('sort__button--active');\n      } else {\n        anchor.classList.remove('sort__button--active');\n      }\n    });\n  }\n\n\n  setSortClickHandler(callback) {\n    this.createEventListener(this.element, 'click', (evt) => {\n      this.#setActiveAnchor(evt);\n      callback(evt);\n    });\n\n    return this.element;\n  }\n}\n\nexport { SortMenuView as default };\n","import AbstractView from './abstract-view';\n\nconst getUserProfileTemplate = (userRank) => (\n  `<section class=\"header__profile profile \">\n    <p class=\"profile__rating\">${userRank || ''}</p>\n    <img class=\"profile__avatar\" src=\"images/bitmap@2x.png\" alt=\"Avatar\" width=\"35\" height=\"35\">\n  </section>`\n);\n\nclass UserProfileView extends AbstractView {\n  #userRank = '';\n  constructor(userRank) {\n    super();\n    this.#userRank = userRank;\n  }\n\n  get template() {\n    return getUserProfileTemplate(this.#userRank);\n  }\n\n}\n\nexport { UserProfileView as default };\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",$=\"Invalid Date\",l=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},D=\"en\",v={};v[D]=M;var p=function(t){return t instanceof _},S=function(t,e,n){var r;if(!t)return D;if(\"string\"==typeof t)v[t]&&(r=t),e&&(v[t]=e,r=t);else{var i=t.name;v[i]=t,r=i}return!n&&r&&(D=r),r||!n&&D},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var D=this.$locale().weekStart||0,v=(y<D?y+7:y)-D;return $(r?m-v:m+(6-v),M);case a:case d:return l(g+\"Hours\",0);case u:return l(g+\"Minutes\",1);case s:return l(g+\"Seconds\",2);case i:return l(g+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),$=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||$;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].substr(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||l[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,D=O.m(this,M);return D=(l={},l[c]=D/12,l[f]=D,l[h]=D/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?D:O.a(D)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),b=_.prototype;return w.prototype=b,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){b[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=v[D],w.Ls=v,w.p={},w}));","import { urlAlphabet } from './url-alphabet/index.js'\nif (true) {\n  if (\n    typeof navigator !== 'undefined' &&\n    navigator.product === 'ReactNative' &&\n    typeof crypto === 'undefined'\n  ) {\n    throw new Error(\n      'React Native does not have a built-in secure random generator. ' +\n        'If you don’t need unpredictable IDs use `nanoid/non-secure`. ' +\n        'For secure IDs, import `react-native-get-random-values` ' +\n        'before Nano ID.'\n    )\n  }\n  if (typeof msCrypto !== 'undefined' && typeof crypto === 'undefined') {\n    throw new Error(\n      'Import file with `if (!window.crypto) window.crypto = window.msCrypto`' +\n        ' before importing Nano ID to fix IE 11 support'\n    )\n  }\n  if (typeof crypto === 'undefined') {\n    throw new Error(\n      'Your browser does not have secure random generator. ' +\n        'If you don’t need unpredictable IDs, you can use nanoid/non-secure.'\n    )\n  }\n}\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, size, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * size) / alphabet.length)\n  return () => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size) => customRandom(alphabet, size, random)\nlet nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n  while (size--) {\n    let byte = bytes[size] & 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte < 63) {\n      id += '_'\n    } else {\n      id += '-'\n    }\n  }\n  return id\n}\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","let urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport { urlAlphabet }\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { getFilmsStatistic, getUserRank } from './filter.js';\nimport { getRandomFilmData } from './mock/data.js';\nimport { render, RenderPosition } from './render.js';\nimport UserProfileView from './view/user-profile-view.js';\nimport MainMenuView from './view/main-menu-view.js';\nimport FilmFooterView from './view/films-quantity-footer-view.js';\nimport FilmDeskPresenter from './presenter/films-desk-presenter.js';\n\nconst filmsData = getRandomFilmData();\nconst filmsStatistic = getFilmsStatistic(filmsData);\nconst userRank = getUserRank();\n\nconst sectionHeader = document.querySelector('.header');\nconst sectionMain = document.querySelector('.main');\nconst sectionFooter = document.querySelector('.footer');\nconst footerStatistic = sectionFooter.querySelector('.footer__statistics');\n\nrender(sectionHeader, new UserProfileView(userRank), RenderPosition.BEFOREEND);\nrender(sectionMain, new MainMenuView(filmsStatistic), RenderPosition.BEFOREEND);\n\nconst filmDesk = new FilmDeskPresenter(sectionMain);\nfilmDesk.init(filmsData);\n\nif (filmsData.length) {\n  render(footerStatistic, new FilmFooterView(filmsStatistic), RenderPosition.BEFOREEND);\n}\n"],"names":["SectionMessages","DEFAULT","RATED","POPULAR","NO_MOVIES","NO_WATCHLIST","NO_HISTORY","NO_FAVORITE","SortType","COMMENT","RATE","DATE","DateFormatStyle","YEAR","PresenterMessages","DELETE_POPUP","DELETE_POPUP_UPDATE","UPDATE_POPUP","UPDATE_FILM","UpdateStates","WITHOUT_POPUP_UPDATE","WITHOUT_FILM_UPDATE","WITH_POPUP_UPDATE","WITH_FILM_UPDATE","PREVENT_DEFAULT","EVENT_DEFAULT","KeyCode","ESC","changeDateFormat","filmStatistic","watchlist","watched","favorite","total","userRank","Infinity","getUserRank","rank","rankValues","Object","entries","key","min","max","getFilmsStatistic","filmData","Array","isArray","length","forEach","film","userDetails","getTopRatedFilmsData","films","filter","Boolean","filmInfo","totalRating","sort","a","b","getTopCommentedFilmsData","comments","getFilmsDataByDate","release","date","first","parseInt","second","getRandomInteger","getNonRepeatUintArray","getRandomBoolean","getRandomPartFromArray","getRandomDate","getRandomFloatStrict","nanoid","BASE_IMAGE_URL","COMMENT_MAX_QUANTITY","COMMENT_MIN_QUANTITY","FILM_MAX_QUANTITY","FILM_MIN_QUANTITY","FILM_MAX_RATE","FILM_MIN_RATE","FILM_MIN_PEGI","FILM_MAX_PEGI","FILM_MIN_RUNTIME","FILM_MAX_RUNTIME","FILM_DESCRIPTION_MAX_QUANTITY","FILM_DESCRIPTION_MIN_QUANTITY","DATE_BASE_VALUE","DATE_GAP_MAX","HOUR_VALUE","filmUrl","Map","set","filmDescriptions","filmCountries","filmWriters","filmDirectors","filmActors","filmGenres","commentEmotionTypes","commentUserNames","filmCommentExample","smile","sleeping","puke","angry","filmQuantity","prepareCommentData","commentEmotion","id","author","emotion","content","getRandomCommentData","commentQuantity","from","getFilmTime","time","hour","minute","prepareFilmData","filmName","keys","size","randomIndexes","slice","title","alternativeTitle","poster","get","pegi","director","description","map","value","join","actors","genre","writers","country","runtime","getRandomFilmData","getCommentEmotionTypes","dayjs","DATE_FORMAT","DESCRIPTION_MAX_LENGTH","BASE_DATE","DateFormat","DAY","WEEK","QUARTER","MONTH","HOUR","MINUTE","SECOND","MSECOND","lower","Math","ceil","upper","floor","random","getRandomFloat","lowerBound","upperBound","valueAfterComma","Number","pow","toFixed","lowerBorder","upperBorder","arrayLength","arrayTotalNumbers","arrayRandomNumbers","abs","totalNumbers","push","round","splice","Error","inputArray","dateBase","dateGap","dateFormat","add","toDate","format","getShortFilmDescription","filmDescription","update","filmsData","changedFilm","index","findIndex","render","replace","RenderPosition","SmartView","AbstractView","FilmCardView","PopupView","FilmPresenter","constructor","filmsList","updateFilmData","updateActivePopup","getActivePopup","prevFilmCard","BEFOREEND","popupData","parseData","updateData","message","restoreData","data","setFilmClickHandler","setWatchListClickHandler","setWatchedClickHandler","setFavoriteClickHandler","restoreHandlers","i","arguments","Function","default","SortMenuView","FilmsDeskView","FilmsSheetView","FilmCardListView","ShowMoreButtonView","FILM_SHOW_PER_STEP","FILM_EXTRA_QUANTITY","FilmDeskPresenter","renderContainer","setSortClickHandler","popup","destroyPopup","document","body","classList","presenter","filmId","init","toward","filmPresenter","sheet","list","sortType","quantity","AFTERBEGIN","setButtonClickHandler","AFTEREND","destroyElement","evt","target","tagName","type","dataset","rest","BEFOREBEGIN","container","component","place","parent","element","child","Element","before","prepend","append","after","oldElement","newElement","oldInstance","newInstance","replaceWith","selector","elementSelector","querySelector","template","createElement","innerHTML","firstElementChild","lastElementChild","removeAllEventListeners","remove","removeElement","eventType","callback","isPreventDefault","eventHandler","preventDefault","isHasSimilar","some","handler","addEventListener","new","removeEventListener","delete","getFilmCardsContainerTemplate","ACTIVE_CLASS","getFilmCardTemplate","year","createEventListener","getFilmSectionTemplate","getFilmFooterTemplate","filmFilter","FilmFooterView","getFilmListSectionTemplate","titleText","isExtraSection","isHidden","getMainMenuTemplate","MainMenuView","TableTerms","DIRECTOR","WRITERS","ACTORS","TIME","COUNTRY","GENRES","emotionTypes","getCommentEmotionTemplate","isChecked","includes","getPopupNewCommentTemplate","comment","userEmoji","getLoadedCommentTemplate","getPopupCommentSectionTemplate","changedComments","userComment","getTableRow","term","ceilData","getCardGenres","genres","genreTemplates","getPopupTemplate","updateFilmPresenter","isFilmUpdating","querySelectorAll","commentSelector","buttonId","getShowMoreButtonTemplate","isPopupUpdating","updateElement","prevElement","scrollPosition","scrollTop","parentElement","replaceChild","getFilmSortMenuTemplate","anchor","getUserProfileTemplate","UserProfileView","filmsStatistic","sectionHeader","sectionMain","sectionFooter","footerStatistic","filmDesk"],"sourceRoot":""}